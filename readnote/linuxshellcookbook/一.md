##一 小试牛刀
获取字符串长度

```
length=${#var}
```

判断是否为root

```
if [ $UID -ne 0 ]; then
    echo Non root user. Please run as root.
else
    echo Root user
fi

```
${parameter:+expression}如果parameter有值且不为空，则使用expression的值。

子shell

```
cmd_output=$(COMMANDS) 这种方法称为子shell
例：
pwd;
(cd /bin; ls);
pwd;


效果等同 cmd_output=`COMMANDS`
```

运行命令直到成功

```
repeat() { while true; do $@ && return; done }

优化版
repeat() { while :; do $@ && return; sleep 30; done }

repeat wget -c http://www.example.com/software-0.1.tar.gz
```

IFS内部字段分隔符

```
#!/bin/bash
#用途: 演示IFS的用法
line="root:x:0:0:root:/root:/bin/bash"
oldIFS=$IFS;
IFS=":"
count=0
for item in $line;
do
     [ $count -eq 0 ]  && user=$item;
     [ $count -eq 6 ]  && shell=$item;
    let count++
done;
IFS=$oldIFS
echo $user\'s shell is $shell;
```

循环：

```
for循环：
for var in list;
do
    commands; #使用变量$var
done

list可以是一个字符串，也可以是一个序列。
echo {1..50}能够生成一个从1~50的数字列表。echo {a..z}或{A..Z}或{a..h}可以生成字母列表。

while循环：
while condition
do
    commands;
done

until循环: 它会一直执行循环，直到给定的条件为真。
x=0;
until [ $x -eq 9 ]; #条件是[$x -eq 9 ]
do
    let x++; echo $x;
done 

```

条件：

```
if condition;then
    commands;
else if condition; then
    commands;
else
    commands;
fi

简洁写法：
[ condition ] && action; #如果condition为真，则执行action；

[ condition ] || action; #如果condition为假，则执行action。

```

算术比较：

```
-gt：大于。

-lt：小于。

-ge：大于或等于。

-le：小于或等于。

[ $var1 -ne 0 -a $var2 -gt 2 ]  #使用逻辑与-a
[ $var1 -ne 0 -o var2 -gt 2 ] #逻辑或 -o

等同于

[ $var1 -ne 0 ] &&  [$var2 -gt 2 ]
[ $var1 -ne 0 ] ||  [$var2 -gt 2 ]

一定要注意在[或]与操作数之间有一个空格。

```

文件系统相关测试:

```
[ -f $file_var ]：如果给定的变量包含正常的文件路径或文件名，则返回真。

[ -x $var ]：如果给定的变量包含的文件可执行，则返回真。

[ -d $var ]：如果给定的变量包含的是目录，则返回真。

[ -e $var ]：如果给定的变量包含的文件存在，则返回真。

[ -c $var ]：如果给定的变量包含的是一个字符设备文件的路径，则返回真。

[ -b $var ]：如果给定的变量包含的是一个块设备文件的路径，则返回真。

[ -w $var ]：如果给定的变量包含的文件可写，则返回真。

[ -r $var ]：如果给定的变量包含的文件可读，则返回真。

[ -L $var ]：如果给定的变量包含的是一个符号链接，则返回真。
```

字符串比较:

```
使用字符串比较时，最好用双中括号，因为有时候采用单个中括号会产生错误，所以最好避开它们。

[[ $str1 = $str2 ]]：当str1等于str2时，返回真。也就是说，str1和str2包含的文本是一模一样的。

[[ $str1 == $str2 ]]：这是检查字符串是否相等的另一种写法。

也可以检查两个字符串是否不同。

[[ $str1 != $str2 ]]：如果str1和str2不相同，则返回真。
我们还可以检查字符串的字母序情况，具体如下所示。

[[ $str1 > $str2 ]]：如果str1的字母序比str2大，则返回真。

[[ $str1 < $str2 ]]：如果str1的字母序比str2小，则返回真。

[[ -z $str1 ]]：如果str1包含的是空字符串，则返回真。

[[ -n $str1 ]]：如果str1包含的是非空字符串，则返回真。

```











